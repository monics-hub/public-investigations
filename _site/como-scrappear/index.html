<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>¿Cómo realizar un flujo de web scrapping en n8n? - Public Investigations</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Public Investigations" property="og:site_name">
  
    <meta content="¿Cómo realizar un flujo de web scrapping en n8n?" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Some post about ¿Cómo conversan los peruanos sobre los candidatos a la presidencia?" property="og:description">
  
  
    <meta content="https://public-investigations.vercel.app//como-scrappear/" property="og:url">
  
  
    <meta content="2026-02-09T00:00:00+00:00" property="article:published_time">
    <meta content="https://public-investigations.vercel.app//about/" property="article:author">
  
  
    <meta content="https://public-investigations.vercel.app//assets/img/https://raw.githubusercontent.com/monics-hub/public-investigations/refs/heads/master/assets/img/flow.png" property="og:image">
  
  
    
  
  
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="¿Cómo realizar un flujo de web scrapping en n8n?">
  
  
    <meta name="twitter:url" content="https://public-investigations.vercel.app//como-scrappear/">
  
  
    <meta name="twitter:description" content="Some post about ¿Cómo conversan los peruanos sobre los candidatos a la presidencia?">
  
  
    <meta name="twitter:image:src" content="https://public-investigations.vercel.app//assets/img/https://raw.githubusercontent.com/monics-hub/public-investigations/refs/heads/master/assets/img/flow.png">
  

	<meta name="description" content="Some post about ¿Cómo conversan los peruanos sobre los candidatos a la presidencia?">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/logo.png" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/logo.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/logo.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/logo.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700|Lato:300,400,700&display=swap" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/logo.png" alt="Monica"></a>
      </div>
      <div class="author-name">Monica</div>
      <p>Holis! Aqui puede encontrar una versión mejorada de investigaciones públicas utilizando web scrapping. De clic en el primer post para conocer como se realizo el trabajo, o visite cualquiera de los post para ver un resumen.</p>
    </div>
  </header> <!-- End Header -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure style="margin: 0; padding: 0;"> <!-- Remove prepend/append, just use page.img --> 
        <img class="page-image" src="https://raw.githubusercontent.com/monics-hub/public-investigations/refs/heads/master/assets/img/flow.png" alt="¿Cómo realizar un flujo de web scrapping en n8n?" style="width: 100%; height: auto; display: block; max-width: 100%;"> </img>
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content" style="padding: 1rem;">
      <header class="header-page">
        <h1 class="page-title" style="font-size: clamp(1.5rem, 5vw, 2.5rem); margin: 0.5rem 0;">¿Cómo realizar un flujo de web scrapping en n8n?</h1>
        <div class="page-date"><span style="font-size: clamp(0.875rem, 2vw, 1rem);">2026, Feb 09&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <div style="line-height: 1.6; word-wrap: break-word; overflow-wrap: break-word;">
        <p>El día de hoy veremos como se realiza web scrapping a un blog desde un flujo de n8n.</p>

<ul>
  <li>
    <p><strong>Seleccionar una url a Scrappear.</strong>
En este caso tomaremos como ejemplo la siguiente: https://www.dinamic.site/investigacionespublicas. Podemos observar que dicho sitio web contiene una lista de posts sobre investigaciones públicas que el creador del sitio web (Dinamics) a realizado. Sin embargo es de notar que únicamente colocaron un título, foto, fecha y un documento PDF en cada post. Sin embargo dichos posts carecen de contenido textual, y el contenido es visible fácilmente. El objetivo será entonces, utilizar Web Scrapping para extraer el contenido de dichos artículos para mejorarlos a través de agregar una descripción y pasar los pdf a imagenes.</p>
  </li>
  <li>
    <p><strong>Crear una instancia de EC2.</strong>
Procedemos a crear una instancia de n8n, la cual podemos utilizar en local o hacerlo mediante la nube. En mi caso utilizaré una instancia EC2 de AWS la cual me permite tener el flujo de trabajo de n8n corriendo diariamente en la nube para en automático, ejecutar un script casa cierto tiempo para extraer nuevos posts en caso de que se publiquen. Para lo cual después de haber creado una cuenta de AWS Cloud procedemos a crear una instancia de EC2 base linux.</p>
  </li>
  <li>
    <p><strong>Instalar Docker.</strong>
Una vez tengamos nuestra distribuación de linux lista procedemos a ejecutar una serie de comandos en terminal para instalar Docker, Docker Compose y para descargar la imagen del contenedor de n8n disponible en Dockerhub.</p>
  </li>
  <li>
    <p><strong>Crear un flujo de n8n.</strong>
Una vez listo el servidor de n8n, empezamos añadiendo un primer nodo para ejecutar el workflow al dar clic como trigger. Al final lucirá así:
<img src="../assets/img/workflow.png" alt="Workflow" /></p>
  </li>
  <li>
    <p><strong>Nodo HTTP request.</strong>
En la sección de nodos “core” podemos hallar un nodo para realizar una request HTTP. En la configuración seleccionamos la URL a Scrappear.
El caso de Wix es muy especial ya que utiliza la tecnología Thunderbolt, por lo que en realidad la URL que trae la información es distinta. Para saber cual es tenemos que entrar a las herramientas de desarrollador. Buscando un poco la url usada fue: https://www.dinamic.site/_api/blog-frontend-adapter-public/v2/post-feed-page Como se puede apreciar en la imagen:</p>
  </li>
</ul>

<p><img src="../assets/img/request.png" alt="Request" /></p>

<ul>
  <li><strong>Nodo Scrapper.</strong>
El nodo más importante. Es un nodo de tipo “código”, que para este ejemplo se selecciono JavaScript como lenguaje ya que a diferencia de Python este no require la instalación de bibliotecas externas para realizar web scrapping (a diferencia de Python que requiere Beautiful Soup). Ya que JavaScript provee herramientas nativas para trabajar con documentos HTML.
<img src="../assets/img/scrapper.png" alt="Scrapper" /></li>
</ul>

<p>Este nodo es la parte dificil y su código variará dependiendo del sitio web a Scrappear. En este caso tenemos que trabajar sobre un documento HTML generado con Wix, el cual suele generar código bastante repetitivo y criptico. Recomiendo descargar el response del nodo anterior y abrirlo en un editor de texto, y buscar palabras claves de lo que lo queremos Scrappear.</p>

<p>Cómo ejemplo si queremos extraer el título empezamos por extraer la información manualmente de los primeros dos ejemplos:</p>

<ul>
  <li>¿Cómo conversan los peruanos sobre los candidatos a la presidencia?</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>EC</td>
          <td>Coche bomba en Guayaquil - el ataque que reavivó la crisis de seguridad en Ecuador</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p>Posteriormente buscamos dichos titulos en la respuesta que obtuvimos (usando una herramienta de busqueda de un editor de texto). Una vez encontradas dichas instancias (que en este caso son muchas ya que Wix repite la información), tenemos dos opciones. Crear las cadenas de regex manualmente o copiar un fragmento de la respuesta y darsela a un LLM para que genere el codigo Regex que me de la información que necesito.</p>

<p>El código que se genero finalmente fue el siguiente:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">$input</span><span class="p">.</span><span class="nf">first</span><span class="p">().</span><span class="nx">json</span><span class="p">.</span><span class="nx">postFeedPage</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nx">posts</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">postId</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">"':</span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">lastPublishedDate</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">excerpt</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">excerpt</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">"':</span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">slug</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">slug</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">base</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">imgUrl</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">media</span><span class="p">.</span><span class="nx">wixMedia</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
  <span class="nx">results</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span>
    <span class="na">json</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">postId</span><span class="p">,</span>
      <span class="nx">title</span><span class="p">,</span>
      <span class="nx">date</span><span class="p">,</span>
      <span class="nx">slug</span><span class="p">,</span>
      <span class="nx">url</span><span class="p">,</span>
      <span class="nx">imgUrl</span><span class="p">,</span>
      <span class="nx">excerpt</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li><strong>Resumir el texto con un nodo LLM.</strong>
Usamos un LLM conectado a ChatGpt con el siguiente prompt:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Eres un escritor de un blog. Tu trabajo es el leer el titulo y la fecha de un post. Si conoces del tema escribes acerca de ello según tus conocimientos. Sino lo inventas. Debe de ser un resumen corto (4 párrafos) acerca de que podría tratar el post. Dicho resumen será publicado como el cuerpo del post. Así como no repitas el titulo ni la fecha, solo escribe el cuerpo del post. No cuentes en tu respuesta tu razonamiento. Tu respuesta debe ser el texto listo para publcarse, sin que el usurio se de cuenta de que fue generado con IA. El blog le pertenece a DINAMIC una empresa que detecta y analiza las conversaciones en redes sociales como ningún otro software. Su tecnología estudia con IA el contexto social, geográfico y discursivo. Para obtener datos que ayudan a la toma de desiciones. En caso de que $json.excerpt o $json.originalContent no sea vacíos, tu respuesta debe de empezar por incluir dicho texto, más algo más que tu escribas (generes)."
</code></pre></div>    </div>
  </li>
  <li><strong>Publicar el contenido extraido en Jekyll.</strong>
Finalmente se publico el contenido en un website de Jekyll, es decir este!</li>
</ul>

      </div>
      
    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
